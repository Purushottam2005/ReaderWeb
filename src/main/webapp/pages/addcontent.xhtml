<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
       xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">

	<ui:composition template="../resources/_template.xhtml">
	
	<ui:define name="content">
	<h:form id="contentform">
		<p:fieldset legend="#{language['label.legend.add.content']}">
			<h:panelGrid id="contentGrid" columns="3">
				<p:outputLabel value="#{language['label.description']}" for="description" />
				<p:inputText id="description" value="#{contentController.content.description}" size="30"
					required="true" requiredMessage="#{language['msg.field.required']}"
					maxlength="20" />
				<h:message for="description" />

				<p:outputLabel value="#{language['label.type']}" for="type" />
				<p:inputText id="type" value="#{contentController.content.type}"
					size="30" required="true"
					requiredMessage="#{language['msg.field.required']}" maxlength="20" />
				<h:message for="type" />

				<p:outputLabel value="#{language['label.tag']}" for="tag" />
				<p:inputText id="tag" value="#{contentController.content.tag}"
					size="30" required="true"
					requiredMessage="#{language['msg.field.required']}"	>
				</p:inputText>
				<h:message for="tag" />
				
				<p:outputLabel value="#{language['label.url']}" for="url" />
				<p:inputText id="url" value="#{contentController.content.url}"
					size="30" required="true"
					requiredMessage="#{language['msg.field.required']}"	>
				</p:inputText>
				<h:message for="url" />
				<br />
				
			</h:panelGrid>

			<!-- Notification  -->
			<p:growl id="msg" sticky="false" severity="info,warn" life="3000" />
			<!-- Command Buttons -->

			<!-- Save -->
			<p:commandButton icon="ui-icon-disk"
				value="#{language['command.save']}" ajax="false"
				onclick="topBar.show()" action="#{contentController.save}"
				update="msg, contenttableform:contentstableresult" />
		</p:fieldset>
		<br />
	</h:form>
	<h:form id="contenttableform">
	<p:dataTable id="contentstableresult" var="content" value="#{contentController.listContent}" 
	paginator="true" rows="5">
			<p:column>
				<f:facet name="header" />	
			</p:column>
			<p:column>
				<f:facet name="header" />
				<p:commandLink type="button" onclick="pop.show()">
					<h:graphicImage library="img" name="trashfull.png" style="border:0" />
					<f:setPropertyActionListener target="#{contentController.content}"
						value="#{user}" />
				</p:commandLink>

				<!-- Dialog -->
				<p:confirmDialog message="#{language['msg.dialog.delete.user']}"
					header="#{language['label.header.delete']}" severity="alert"
					widgetVar="pop" closable="false">
					<p:commandButton action="#{contentController.deleteContent}" ajax="false"
						update="userstable" value="#{language['label.yes']}" oncomplete="pop.hide()" />
					<p:commandButton value="#{language['label.no']}" ajax="false" update="@form"
						actionListener="#{contentController.init}" onclick="pop.hide()" />

				</p:confirmDialog>
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="#{language['label.description']}" />
				</f:facet>
				<h:outputText value="#{content.description}" />
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="#{language['label.type']}" />
				</f:facet>
				<h:outputText value="#{content.type}" />
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="#{language['label.tag']}" />
				</f:facet>
				<h:outputText value="#{content.tag}" />
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="#{language['label.url']}" />
				</f:facet>
				<h:outputText value="http://#{content.url}"/>
			</p:column>

		</p:dataTable>
	</h:form>
	
	</ui:define>
	</ui:composition>
</html>